<!DOCTYPE html>
<html>
<head>
	<!-- jquery -->
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
	<!-- jquery -->
	<!-- AJAX script-->
	<script language="Javascript">
		function run() {
		    xmlhttpPost("plenoptisign/plenoptisign/bin/cgi_script.py")
		    return true; // return false to cancel form action
		}

		function xmlhttpPost(strURL) {
			var xmlHttpReq = false;
			var self = this;
			// Mozilla/Safari
			if (window.XMLHttpRequest) {
				self.xmlHttpReq = new XMLHttpRequest();
			}
			// IE
			else if (window.ActiveXObject) {
				self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
			}
			self.xmlHttpReq.open('POST', strURL, true);
			self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
			self.xmlHttpReq.onreadystatechange = function() {
				if (self.xmlHttpReq.readyState == 4) {
					updatepage(self.xmlHttpReq.responseText);
				}
			}
			self.xmlHttpReq.send(getquerystring());
		}

		function getquerystring() {
			var form = document.forms['f1'];
			var pp = form.pp.value;
			var fs = form.fs.value;
			var pm = form.pm.value;
			var dA = form.dA.value;
			var fU = form.fU.value;
			var df = form.df.value;
			var a = form.a.value;
			var M = form.M.value;
			var i = form.i.value;
			var dx = form.dx.value;
			qstr = 'pp=' + encodeURI(pp) + '&' +
			       'fs=' + encodeURI(fs) + '&' +
	             'pm=' + encodeURI(pm) + '&' +
	             'dA=' + encodeURI(dA) + '&' +
	             'fU=' + encodeURI(fU) + '&' +
	             'df=' + encodeURI(df) + '&' +
			       'a=' + encodeURI(a) + '&' +
	             'M=' + encodeURI(M) + '&' +
	             'i=' + encodeURI(i) + '&' +
	             'dx=' + encodeURI(dx) + '&' +
	        	    'refo=' + encodeURI('1') + '&' +
	  	 		    'tria=' + encodeURI('1'); // NOTE: no '?' before querystring
			return qstr;
	    }

	    function updatepage(str){
	        document.getElementById("result").innerHTML = str;
	    }
	  </script>
	  <!-- AJAX script-->
</head>
<body	>
	<form name="f1">
	  <p>
	    <TABLE class="fixed">
	      <TR>
	        <TD><b>Optical parameters</b></TD>
	        <TD>pixel pitch <i>p<sub>p</sub></i></TD>
	        <TD><input name="pp" type="text" value="0.009" size="7" /> mm</TD>
	        <TD>exit pupil distance <i>d<sub>A</sub></i></TD>
	        <TD><input name="dA" type="text" value="111.0324" size="7" /> mm</TD>
	      </TR>
	      <TR>
	        <TD></TD>
	        <TD>micro lens focal length <i>f<sub>s</sub></i></TD>
	        <TD><input name="fs" type="text" value="2.75" size="7" /> mm</TD>
	        <TD>micro lens pitch <i>p<sub>m</sub></i></TD>
	        <TD><input name="pm" type="text" value="0.125" size="7" /> mm</TD>
	      </TR>
	        <TD></TD>
	        <TD>main lens focal length <i>f<sub>U</sub></i></TD>
	        <TD><input name="fU" type="text" value="193.2935" size="7" /> mm</TD>

	        <TD>main lens focus <i>d<sub>f</sub></i></TD>
	        <TD><input name="df" type="text" value="inf" size="7" /> mm</TD>
	      </TR>
			<TR>
	        <TD></TD>
	        <TD>main principal plane distance <font style="text-decoration-line: overline;"><i>H<sub>1U</sub>H<sub>2U</sub></i></font></TD>
	        <TD><input name="HH" type="text" value="-65.5563" size="7" /> mm</TD>
	        <TD>micro principal plane distance <font style="text-decoration-line: overline;"><i>H<sub>1s</sub>H<sub>2s</sub></i></font></TD>
	        <TD><input name="hh" type="text" value=".396" size="7" /> mm</TD>
	      </TR>
	      <TR>
	        <TD></TD>
	        <TD></TD>
	        <TD></TD>
	        <TD></TD>
	        <TD></TD>
	      </TR>
	      <TR>
	        <TD><b>Refoc. parameters</b></TD>
	        <TD>shift value <i>a</i></TD>
	        <TD><input name="a" type="text" value="1.0" size="7" /></TD>
	        <TD>micro image diameter <i>M</i></TD>
	        <TD><input name="M" type="text" value="16.0" size="7" />	px</TD>
	      </TR>
	      <TR>
	        <TD></TD>
	        <TD></TD>
	        <TD></TD>
	        <TD></TD>
	        <TD></TD>
	      </TR>
	      <TR>
	        <TD><b>Triangulation parameters</b></TD>
	        <TD>virt. camera gap <i>i</i></TD>
	        <TD><input name="i" placeholder="gap value" type="text" value="-6" size="7" /></TD>
	        <TD>disparity <i>&#916;x</i></TD>
	        <TD><input name="dx" placeholder="disparity value" type="text" value="1.0" size="7" /> px</TD>
	      </TR>
	    </TABLE>
	  </p>
	  <input type="button" class="submit_btn" value="Run" onclick='JavaScript:run()' />
	  <div id="result"></div>
	</form>
</body>
</html>